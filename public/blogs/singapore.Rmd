---
categories:
- ""
- ""
date: "2017-10-31T21:28:43-05:00"
description: ""
draft: false
image: pic10.jpg
keywords: ""
slug: singapore
title: AirBnB
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(
  message = FALSE, 
  warning = FALSE, 
  tidy=FALSE,     # display code as typed
  size="small")   # slightly smaller font for code
options(digits = 3)

# default figure size
knitr::opts_chunk$set(
  fig.width=6.75, 
  fig.height=6.75,
  fig.align = "center")

#avoid scientific notation 
options(scipen=999)
```

```{r load-libraries, warning=FALSE, message=FALSE, echo=FALSE, eval = TRUE }
library(tidyverse)  # Loading packages for inspecting, wrangling, visualizing and modeling the data
library(mosaic)
library(ggthemes)
library(lubridate)
library(fivethirtyeight)
library(here)
library(skimr)
library(janitor)
library(vroom)
library(tidyquant)
library(ggthemes)
library(kableExtra)
library(ggrepel)
library(RColorBrewer)
library(scales)
library(gridExtra)
library(infer)
library(moderndive)
library(htmlTable)
library(leaflet)
library(GGally)
library(kableExtra)
library(huxtable)
library(broom)
library(fastDummies)
library(jtools)
library(ggfortify)
library(car)
```

# Predicting prices for AirBnBs

In this project I will be analysing data about Airbnb listings in Singapore with the goal of building a model to predict the total cost for two people staying four nights in Singapore. The data is from [insideairbnb.com]()

```{r load data}
#importing the raw data from insideairbnb.com 
df_raw <- read_csv("listings.csv")
```

## Inspecting and cleaning the data 

```{r, cache=TRUE, eval = TRUE }
#glimpsing the data frame to get a sense of the raw data
glimpse(df_raw)
```
```{r, cache=TRUE, eval = TRUE }
#Skim for further inspection of the data frame 
skimr::skim(df_raw)
```

An initial inspection using the `glimpse` and `skim` functions above shows that the raw data consists of 7323 observations (rows) and 106 variables (columns) and includes both quantitative and qualitative information on AirBnBs in Singapore. It revealed numerous duplicated observations and many missing values which I proceed to remove, alongside any irrelevant variables. Lastly, some quantitative variables (eg. price, cleaning_fee, extra_people) appear with the wrong data type, which I change into numerical. 

Some of the main variables analyzed are described below, with cost data typically expressed in US$: 
- `price` = cost per night
- `cleaning_fee`: cleaning fee
- `extra_people`: charge for having more than 1 person
- `property_type`: type of accommodation (House, Apartment, etc.)
- `room_type`:
  * Entire home/apt (guests have entire place to themselves)
  * Private room (Guests have private room to sleep, all other rooms shared)
  * Shared room (Guests sleep in room shared with others)
- `number_of_reviews`: Total number of reviews for the listing
- `review_scores_rating`: Average review score (0 - 100)
- `longitude, latitude`: geographical coordinates to help us locate the listing
- `neighbourhood`: three variables on a few major neighbourhoods in each city
- `square_feet`: size of the listing in square feet
- `cancellation policy`: type of cancellation policy (flexible, moderate, strict)
- `host_is_identified`: indicates if the host has been validated by airbnb (True or False)
- `host_is_superhost`: if the host is experienced and has received consistently positive reviews

```{r, data frame simplification}
##selecting the needed variables 
df_fil <- df_raw %>%
  select(id,listing_url,
         price, cleaning_fee , extra_people, property_type,  room_type,
         number_of_reviews, review_scores_rating,  
         latitude ,longitude , is_location_exact,
         neighbourhood_cleansed , neighbourhood_group_cleansed, neighbourhood, 
         bathrooms,bedrooms,beds,
        host_identity_verified, host_is_superhost, accommodates,
        cancellation_policy, minimum_nights, guests_included)

```
```{r, numeric transformation}
# turn prices, cleaning_fee and extra people into a numeric column
#and removing the '$' and ','
df_fil <- transform(df_fil,price=as.numeric(sub("\\$","", sub(",","", price)),na.rm=TRUE),
                cleaning_fee=as.numeric(sub("\\$","", sub(",","", cleaning_fee)),na.rm=TRUE),
                extra_people=as.numeric(sub("\\$","", sub(",","", extra_people)),na.rm=TRUE))

```
```{r, remove duplicate listings and NAs} 
df_cleaned <- df_fil%>%
#removing duplicate ids 
 filter(duplicated(id) == FALSE) %>%
#removing listings with missing price
  filter(is.na(price) == FALSE)

```
  







